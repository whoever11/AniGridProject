let questionsAndAnswers = [
 { question: "My Hero Academia powers are called?", answer: "Quirks" },
 { question: "Naruto's village is called?", answer: "Hidden Leaf Village" },
 { question: "Who is known as the Strongest Character in Jujutsu Kaisen?", answer: "Gojo" },
 { question: "What is the power system in HunterxHunter called?", answer: "Nen" },
 { question: "Who defeated Cell in dragonballz?", answer: "Gohan" },
{ question: "who gave luffy his straw hat?", answer: "Shanks" },
 { question: "who gave luffy his straw hat?", answer: "Shanks" },
 { question: "Anime with a death notebook?", answer: "Deathnote" },
 { question: "What wall did the Titans attack first?", answer: "Maria" },
 { question: "In Jujutsu Kaisen, how many fingers did Yuji eat by the end of the first season?", answer: "three" },
{ question: "In Jujutsu Kaisen, what is Yujis type in girls?", answer: "Jennifer Lawrence" },
{ question: "In Death Note, who was Misa Misas Shinigami?", answer: "Rem" },
{ question: "What was Christas real name in Attack on Titan?", answer: "Historia" },
{ question: "What does ODM gear stand for?", answer: "Omni Directional Mobility" },
 { question: "What was Gons Hunter Exam number?", answer: "405" },
 { question: "What is Zenitsus first form called?", answer: "Thunderclap" },
{ question: "who gave luffy his straw hat?", answer: "Shanks" },
 { question: "Who is the protagonist of 'Naruto'?", answer: "Naruto" },
 { question: "What is the name of the main character in 'One Piece'?", answer: "Luffy" },
 { question: "What is the name of the main character in 'My Hero Academia'?", answer: "Deku" },
 { question: "What is the name of the main character in 'Dragon Ball Z'?", answer: "Goku" },
 { question: "What is the name of the main character in 'Attack on Titan'?", answer: "Eren" },
 { question: "What is the name of the main character in 'Demon Slayer'?", answer: "Tanjiro" },
 { question: "What is the name of the main character in 'Hunter x Hunter'?", answer: "Gon" },
 { question: "What is the name of the main character in 'Death Note'?", answer: "Light" },
 { question: "What is the name of the main character in 'Fullmetal Alchemist'?", answer: "Edward" },
 { question: "What is the name of the main character in 'Cowboy Bebop'?", answer: "Spike" },
 { question: "What is the name of the main character in 'Sailor Moon'?", answer: "Usagi" },
 { question: "What is the name of the main character in 'Sword Art Online'?", answer: "Kirito" },
 { question: "What is the name of the main character in 'Bleach'?", answer: "Ichigo" },
{ question: "What is the name of the main character in 'Fairy Tail'?", answer: "Natsu" },
 { question: "What is the name of the main character in 'Yu Yu Hakusho'?", answer: "Yusuke" },
{ question: "What is the name of the main character in 'Inuyasha'?", answer: "Inuyasha" },
{ question: "Who is the rubber-man protagonist in 'One Piece'?", answer: "Luffy" },
{ question: "Which anime features colossal humanoid creatures?", answer: "Titan" },
{ question: "What device is used to capture Pokémon?", answer: "Pokeball" },
{ question: "In 'Naruto', who has the Nine-Tails?", answer: "Naruto" },
{ question: "What is Ash's main Pokémon?", answer: "Pikachu" },
{ question: "In 'Death Note', who is the main shinigami?", answer: "Ryuk" },
{ question: "Who is the fire wizard in 'Fairy Tail'?", answer: "Natsu" },
{ question: "What's the spiritual form of a 'Soul Reaper' called in 'Bleach'?", answer: "Shinigami" },
{ question: "Which anime features 'Titans'?", answer: "Attack on Titan" },
{ question: "Who pilots the EVA-01 in 'Neon Genesis Evangelion'?", answer: "Shinji" },
{ question: "Who is the brother of Alphonse in 'Fullmetal Alchemist'?", answer: "Edward" },
{ question: "What is Edward's nickname in 'Fullmetal Alchemist'?", answer: "Fullmetal" },
{ question: "What anime features the character 'Spike Spiegel'?", answer: "Bebop" },
{ question: "What is the main sport in 'Kuroko's Basketball'?", answer: "Basketball" },
{ question: "Who is the protagonist of 'Demon Slayer'?", answer: "Tanjiro" },
{ question: "What is the central game in 'No Game No Life'?", answer: "Chess" },
{ question: "Which anime is set in Aincrad?", answer: "Sword Art Online" },
{ question: "Who is the main character in 'Trigun'?", answer: "Vash" },
{ question: "What mecha anime features 'Lelouch'?", answer: "Code Geass" },
{ question: "What is the main character's name in 'Mob Psycho 100'?", answer: "Mob" },
{ question: "Who is the cat in 'Sailor Moon'?", answer: "Luna" },
{ question: "What is the main card game in 'Yu-Gi-Oh!'?", answer: "Duel Monsters" },
{ question: "Who is the red-haired pirate in 'One Piece'?", answer: "Shanks" },
{ question: "Which anime features 'Nezuko'?", answer: "Demon Slayer" },
{ question: "What ninja village is Naruto from?", answer: "Konoha" },
{ question: "Who is Luffy's navigator in 'One Piece'?", answer: "Nami" },
{ question: "What is Goku's Saiyan name?", answer: "Kakarot" },
{ question: "Who is the main antagonist in 'Death Note'?", answer: "Kira" },
{ question: "Who is the main female character in 'Toradora!'?", answer: "Taiga" },
{ question: "What is the main character's power in 'My Hero Academia'?", answer: "Quirk" },
{ question: "What game is central in 'Hikaru no Go'?", answer: "Go" },
{ question: "Who is the captain of the Straw Hat Pirates?", answer: "Luffy" },
{ question: "What is the main theme of 'Tokyo Ghoul'?", answer: "Ghouls" },
{ question: "Who is the main character in 'Gintama'?", answer: "Gintoki" },
{ question: "What is the most powerful card in 'Yu-Gi-Oh!'?", answer: "Exodia" },
{ question: "Who is the main character in 'Inuyasha'?", answer: "Inuyasha" },
{ question: "What anime is 'Kagome' from?", answer: "Inuyasha" },
{ question: "Who is the Flame Alchemist in 'Fullmetal Alchemist'?", answer: "Mustang" },
{ question: "Who is the butler in 'Black Butler'?", answer: "Sebastian" },
{ question: "What is the main character's weapon in 'Soul Eater'?", answer: "Scythe" },
{ question: "Who is the pirate hunter in 'One Piece'?", answer: "Zoro" },
{question: "who is the green race in dragonballz", answer: "Namekians" },
{question: "who is the founding titan in attack on titan", answer: "Ymir" },
{question: "who is the main villan in demon slayer ", answer: "Muzan" },
{question: "who is the main character in black clover", answer: "Asta" },
{question: "who is asta's main rival in black clover", answer: "Yuno" },
{question: "who is the #1 hero in my hero academia", answer: "All Might" },
{question: "who is the main character in dr stone", answer: "Senku" },
{question: "what clan is sauske from in naruto", answer: "Uchiha" },
{question: "who is rock lees sensei in naruto", answer: "Might Guy" },
{question: "who is vegetas wife in dragonballz", answer: "Bulma" },
{question: "who is vegetas brother in dragonballz", answer: "Tarble" },
{question: "who is luffy's brother in one piece", answer: "Ace" },

]
//Above is the array of questions and answers
let questionObj=null //variable to store the question object
let score = 0 //variable to store the score
let answeredBoxes=[] //array to store the boxes that have been answered
let currentBox=null //variable to store the current box
let gameStarted=false //variable to store if the game has started
//below is function to display random question
function displayRandomQuestion() {
   if (questionsAndAnswers.length === 0 || (answeredBoxes.length === questionsAndAnswers.length)||
   score >= 4)//if there are no more questions or if the score is 4 or more
   {
       endGame()//ends the game if there are no more questions or if the score is 4 or more
       return
    }
    const randomQuestion = questionsAndAnswers[Math.floor(Math.random() * questionsAndAnswers.length)]//random question from array of questions and answers
    questionObj = randomQuestion // Assign randomQuestion to questionObj
    document.querySelector("#question").textContent = questionObj.question
}
// function below for locked boxes
function lockBoxes()// function to lock the box after the question has been answered
{
    document.querySelectorAll(`.box`).forEach(box => {
        box.removeEventListener('click', handleBoxClick)
    })
}
// function below for unlocked boxes
function unlockBoxes()// function to unlock the boxes to be clicked again after the question has been answered
 {
    document.querySelectorAll(`.box`).forEach(box => {
        box.addEventListener('click', handleBoxClick)
    })
}
//function below for handleBoxClick
function handleBoxClick() {
    if (!gameStarted) {
        gameStarted = true
    }//if the game has not started, the game starts
    if (answeredBoxes.includes(this)) {
        return//if the box has been answered, return
    }
    currentBox = this//assigns the current box to the clicked box
    displayRandomQuestion()//displays a random question
    lockBoxes()//locks the boxes
}
//function below for endGame
function endGame() {
    if (score >=4 ) {
        alert('You win!')
    } else if (answeredBoxes.length === questionsAndAnswers.length &&
     score < 4) {
        alert('You lose!')
    }
    restartGame()//restarts the game
}
// below is box to click to display random question
document.querySelectorAll(`.box`).forEach(box => {
    box.addEventListener('click', handleBoxClick)
})

// below is the function to check if answer is correct and submit and the score
document.getElementById('submit').addEventListener('click', function() {
    if (!questionObj || !currentBox) return
    let userAnswer = document.getElementById('answer').value.toLowerCase()
    if (userAnswer === questionObj.answer.toLowerCase())//if the answer is correct as the answer in the array
    {
        alert("correct")//alerts correct
        score += 1
        document.getElementById('score').innerText = score.toString()//increases the score by 1
        answeredBoxes.push(currentBox)//pushes the current box to the answered boxes
        currentBox.style.backgroundColor = "green"//changes the color of the current box to green
    } else {
        alert("incorrect")
        if (score > 0) {
            score -= 1
            document.getElementById('score').innerText = score.toString()//decreases the score by 1
        }
        currentBox.style.backgroundColor = "red"
        answeredBoxes.push(currentBox)//pushes the current box to the answered boxes
    }

    document.getElementById('answer').value = ''// clears the answer box after submitting
    unlockBoxes() // unlocks the boxes
    currentBox = null// clears the current box

    if (
        answeredBoxes.length === questionsAndAnswers.length ||
        score >= 4//if there are no more questions or if the score is 4 or more
    ) {
        endGame()//ends the game
    }
})

// restart button and everything on the screen
document.getElementById(`restart`).addEventListener(`click`, restartGame)
function restartGame() {
    document.getElementById(`answer`).value = `` //clears the answer box
    document.getElementById(`question`).innerText = `` //clears the question box
    document.getElementById(`score`).innerText = `` //clears the score box
    score = 0; //resets the score
    answeredBoxes = []; //resets the answered boxes
    document.querySelectorAll(`.box`).forEach(box => {
        box.style.backgroundColor = `#ccc` //resets the color of the boxes
    })
    gameStarted = false //resets the game started
    unlockBoxes()// this unlocks the boxes to be clicked again
    QuestionObj = null //clears the question object
    currentBox = null //clears the current box
}